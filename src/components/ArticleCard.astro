---
import type { CollectionEntry } from "astro:content";
import { encodeTag, formatDate } from "../lib/articles";
import TagChips from "./TagChips.astro";

interface Props {
  article: CollectionEntry<"articles">;
}

const { article } = Astro.props;

const tagItems = article.data.tags.map((tag) => ({
  label: tag,
  href: `/tags/${encodeTag(tag)}/`,
}));
---

<article class="panel panel-hover p-5 sm:p-6">
  <a href={`/articles/${article.id}/`} class="group block">
    <h3 class="text-lg font-semibold text-slate-800 transition-colors group-hover:text-blue-700">
      {article.data.title}
    </h3>
    <p class="mt-2 text-sm text-slate-500">{formatDate(article.data.date)}</p>
    <p class="mt-3 text-sm leading-7 text-slate-600 sm:text-base">{article.data.description}</p>
  </a>

  {tagItems.length > 0 && <TagChips items={tagItems} className="mt-4" />}
</article>

